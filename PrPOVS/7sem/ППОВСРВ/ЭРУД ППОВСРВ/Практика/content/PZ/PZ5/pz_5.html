<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//RU">
<HTML>
<HEAD>
<link rel="stylesheet" href="../../../../Оболочка/css/style3.css" type="text/css">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1251">
<META HTTP-EQUIV="Content-Language" CONTENT="ru">
<title>ЭРУД по дисциплине "Программирование проблемно-ориентированных вычислительных средств реального времени" &#8250; Практика &#8250; Практическое занятие "Программирование цифрового нерекурсивного фильтра с использованием циклов и различных методов реализации задержки"</title>
<base target="_top">
</HEAD>
<BODY>
<table width="100%" border="0" cellpadding="0" cellspacing="3" background="../../../../Оболочка/images/background.jpg">
  <tr> 
    <td width="13%" rowspan=3 align="center" ><img src="../../../../Оболочка/images/logo_new.jpg" width=117 align="middle"></td>
  <tr> 
    <td width="70%" colspan=2 align="center" valign="middle"> <H1 align="center" >Электронный 
        ресурс по учебной дисциплине<BR>
        "Программирование проблемно-ориентированных вычислительных средств реального времени"<BR> 
        для специальности: </H1>
	  1-40 02 02 "Электронные вычислительные средства"
    </td>
    <td width="12%" rowspan=3 align="center" >&nbsp;</td>
  <Tr>
    <td align=center colspan=2><var class="normal"><A HREF="../../../../index.htm">Оглавление</A> | <A HREF="../../../../Программа/ППОВСРВ_программа_2017.htm" TITLE="Программа курса (Откроется в новом окне)">Программа</A> | <a href="../../../../Теория/theory.htm">Теория</a> | <A HREF="../../../../Практика/practice.htm">Практика</A> | <A HREF="../../../../Контроль_знаний/test.htm">Контроль знаний</A> | <A HREF="../../../../Об авторах/author.htm">Об авторах</A></var></var> </td>
  <tr>
</table>

<!--start-->
<div class="mainBlock">
	<div class="mainTitle"><a name="sub0"></a>5. Программирование цифрового нерекурсивного фильтра с использованием циклов и различных методов реализации задержки.</div>
	<div class="mainSubTitle"><a name="sub1"></a>1) Принципы программирование цифровых нерекурсивных фильтров</div>
 	<div class="mainSubContent">
      <p>Уравнение цифрового нерекурсивного фильтра (ЦНФ), или фильтра с конечной импульсной характеристикой (КИХ или FIR &ndash; Finite Impulse Response) во временной области выглядит следующим образом:</p>
      <table border="0" cellspacing="0" cellpadding="0">
        <tr>
          <td width="50" valign="top">&nbsp;</td>
          <td width="700" valign="center" align="center"><img src="../../../images/pz_for0501.gif" alt="Фор.5.1" width="196" height="57"><br></td>
          <td width="50" valign="center" align="right">&nbsp;</td>
        </tr>
      </table>
      <p>где h(k) - коэффициенты импульсной характеристики фильтра.<br>
        Такой  фильтр N-го порядка может быть представлен следующей схемой (рис.&nbsp;5.1): <br></p>
<h3 align="center"><a name="fig1"></a><img src="../../../images/pz_ris0501.gif" alt="Рис.5.1" width="630" height="141"></h3>
<h3 align="center">Рисунок 5.1 &ndash; Граф-схема цифрового нерекурсивного фильтра</h3>
	<p>При реализации ЦНФ на ЦПС важным является  оптимальное распределение в памяти процессора констант и данных.<br>
Расположение данных, представленное на рис.&nbsp;5.2, позволяет воспользоваться командой DELAY (копирование в следующую по адресу  ячейку), встроенной в команды&nbsp; LTD и MACD, для организации линии задержки.  При этом вычисления следует начинать с XNMN1. Если порядок фильтра мал (не выше 5-го) можно использовать  линейную программу и команды LTD  или LD и&nbsp; MPY или MAC  с аргументом типа #lk.</p>
<h3 align="center"><a name="fig2"></a><img src="../../../images/pz_ris0502.png" alt="Рис.5.2" width="250" height="190"></h3>
<h3 align="center">Рисунок 5.2 &ndash; Порядок данных в памяти для цифрового нерекурсивного фильтра</h3>
	</div>
	<div class="mainSubTitle"><a name="sub2"></a>2) Рекомендации по программированию</div>
 	<div class="mainSubContent">
    <p>При числе коэффициентов &gt;5 используют циклическую  программу и соответствующие команды перехода, при этом порядок расположения  коэффициентов в памяти данных значения не имеет.<br>
      Если коэффициенты расположены в памяти программ, то  можно использовать команду MACD, но при этом по самому младшему адресу в памяти  программ (с него начинается вычисление) должен располагаться коэффициент h(N-1),  обозначенный как HNM1, а по старшему &ndash; h(0), обозначенный как H0.<br>
      Перед началом выполнения программы рекомендуется обнулить все ячейки предыстории (x(n-1), x(n-2), &hellip;, x(n-N+1)).</p>
      <p>При расположении коэффициентов фильтра в памяти программ они должны располагаться в следующем порядке:</p>
	<pre>
	.text			; секция программы
HNM1	.WORD	0		; коэффициент фильтра h(N-1)
HNM2	.WORD	0		; коэффициент фильтра h(N-2)
	.  .  .
H1	.WORD	0		; коэффициент фильтра h(1)
H0	.WORD	0		; коэффициент фильтра h(0)
	</pre>
      <p>При этом предистория фильтра в памяти данных должна располагаться в следующем порядке:</p>
	<pre>
	.data			; секция данных
YN	.WORD	0		; выход фильтра (перед XN)
XN	.WORD	0		; предыстория фильтра x(n)
XNM1	.WORD	0		; предыстория фильтра x(n-1)
	.  .  .
XNMN2	.WORD	0		; предыстория фильтра x(n-N+2)
XNMN1	.WORD	0		; предыстория фильтра x(n-N+1)
	.WORD	0		; свободная ячейка после x(n-N+1)
	</pre>
      <p>При такой реализации порядок коэффициентов и данных не может быть другим. Непосредственное программирование фильтра выполняется двумя командами:</p>
	<pre>
	.text			; секция программы
	RPTZ	A, #N-1	; A:=0, повторить команду N раз
	MACD	*AR2-, HNM1	; A:=A+x(n-k)*h(k),x(n-k)->x(n-k-1)
	</pre>
      <p>При расположении коэффициентов фильтра в памяти данных можно использовать циклическую адресацию. При этом коэффициенты и данные должны располагаться в одном порядке и выравниваться на границу кратную степени двойки и больше, чем число коэффициентов:</p>
	<pre>
	.data			; секция данных
	.ALIGN	128		; выравнивание для N < 128
XNMN1	.WORD	0		; предыстория фильтра x(n-N+1)
XNMN2	.WORD	0		; предыстория фильтра x(n-N+2)
	.  .  .
XNM1	.WORD	0		; предыстория фильтра x(n-1)
XN	.WORD	0		;	 предыстория фильтра x(n)
	.ALIGN	128		; выравнивание для N < 128
HNM1	.WORD	0		; коэффициент фильтра h(N-1)
HNM2	.WORD	0		; коэффициент фильтра h(N-2)
	.  .  .
H1	.WORD	0		; коэффициент фильтра h(1)
H0	.WORD	0		; коэффициент фильтра h(0)
; ПРИМЕЧАНИЕ:	порядок h(k) и x(n-k) может быть обратным,
;		при этом в AR0 необходимо занести -1 
	</pre>
      <p>Непосредственное программирование фильтра выполняется двумя командами:</p>
	<pre>
	.text				; секция программы
	RPTZ	A, #N-1		; A:=0, повторить команду N раз
	MAC	*AR2+0%,*AR3+0%, A	; A:=A+x(n-k)*h(k)
	</pre>
	</div>
</div>
<div align="center">
	<input type="button" class="buttonManage" value="&nbsp;&nbsp;Назад&nbsp;&nbsp;" onClick="document.location.href ='../PZ4/pz_4.html'" />
	<input type="button" class="buttonManage" value="Перечень тем практических занятий" onClick="document.location.href ='../pz.html'" />
	<input type="button" class="buttonManage" value="&nbsp;Вперед&nbsp;" onClick="document.location.href ='../PZ6/pz_6.html'" />
	<div class="mainSubContent"><br></div>
</div>
<!--end-->			
<table width="100%" border="0" cellpadding="0" cellspacing="3" bordercolor="#316AC5" background="../../../../Оболочка/images/background.jpg">
	<Tr><td align=center colspan=2><var class="normal"><A HREF="../../../../index.htm">Оглавление</A> | <A HREF="../../../../Программа/ППОВСРВ_программа_2017.htm" TITLE="Программа курса (Откроется в новом окне)">Программа</A> | <a href="../../../../Теория/theory.htm">Теория</a> | <A HREF="../../../../Практика/practice.htm">Практика</A> | <A HREF="../../../../Контроль_знаний/test.htm">Контроль знаний</A> | <A HREF="../../../../Об авторах/author.htm">Об авторах</A></var></var> </td>
    <Tr><td align=center><var><b>(С) БГУИР</b></var></td></tr>
</table>
</body></html>